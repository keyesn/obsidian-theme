/* Kanban plugin */

body.theme-dark,
body.minimal-dark-black.theme-dark,
body.minimal-dark-tonal.theme-dark,
body.minimal-light-white.theme-light,
body.minimal-light-tonal.theme-light {
  --kanban-border: 0px;
}

body:not(.is-mobile) .kanban-plugin__grow-wrap > textarea:focus {
  box-shadow: none;
}

body:not(.minimal-icons-off) .kanban-plugin svg.cross {
  height: 14px;
  width: 14px;
}

body {
  .kanban-plugin__icon > svg,
  .kanban-plugin__lane-settings-button svg {
    height: 18px;
    width: 18px;
  }

  .kanban-plugin {
    --kanban-border: var(--border-width);
    --interactive-accent: var(--text-selection);
    --interactive-accent-hover: var(--background-modifier-hover);
    --text-on-accent: var(--text-normal);

    background-color: var(--background-primary);
  }

  .kanban-plugin__markdown-preview-view {
    font-family: var(--font-text);
  }

  .kanban-plugin__board > div {
    margin: 0 auto;
  }

  .kanban-plugin__checkbox-label {
    color: var(--text-muted);
  }

  .kanban-plugin__item-markdown ul {
    margin: 0;
  }

  .kanban-plugin__item-content-wrapper {
    box-shadow: none;
  }

  .kanban-plugin__grow-wrap > textarea,
  .kanban-plugin__grow-wrap::after {
    border: 0;
    border-radius: 0;
    padding: 0;
  }

  .kanban-plugin__markdown-preview-view,
  .kanban-plugin__grow-wrap > textarea,
  .kanban-plugin__grow-wrap::after,
  .kanban-plugin__item-title p {
    font-size: var(--font-ui-medium);
    line-height: 1.3;
  }

  .kanban-plugin__item {
    background-color: var(--background-primary);
  }

  .kanban-plugin__item-title-wrapper {
    align-items: center;
  }

  .kanban-plugin__lane-form-wrapper {
    border: 1px solid var(--background-modifier-border);
  }

  .kanban-plugin__lane-header-wrapper {
    border-bottom: 0;
  }

  .kanban-plugin__lane-title p,
  .kanban-plugin__lane-header-wrapper .kanban-plugin__grow-wrap > textarea,
  .kanban-plugin__lane-input-wrapper .kanban-plugin__grow-wrap > textarea {
    background: transparent;
    color: var(--text-normal);
    font-size: var(--font-ui-medium);
    font-weight: 500;
  }

  .kanban-plugin__item-input-wrapper .kanban-plugin__grow-wrap > textarea {
    border-radius: 0;
    height: auto;
    padding: 0;
  }

  .kanban-plugin__item-form .kanban-plugin__grow-wrap {
    background-color: var(--background-primary);
  }

  .kanban-plugin__item-input-wrapper .kanban-plugin__grow-wrap > textarea::placeholder {
    color: var(--text-faint);
  }

  .kanban-plugin__lane button.kanban-plugin__lane-settings-button.is-enabled,
  .kanban-plugin__lane button.kanban-plugin__lane-settings-button,
  .kanban-plugin__item .kanban-plugin__item-edit-archive-button,
  .kanban-plugin__item button.kanban-plugin__item-edit-button,
  .kanban-plugin__item-settings-actions > button,
  .kanban-plugin__lane-action-wrapper > button {
    background: transparent;
    transition: color 0.1s ease-in-out;
  }

  .kanban-plugin__item .kanban-plugin__item-edit-archive-button:hover,
  .kanban-plugin__item button.kanban-plugin__item-edit-button.is-enabled,
  .kanban-plugin__item button.kanban-plugin__item-edit-button:hover,
  .kanban-plugin__lane button.kanban-plugin__lane-settings-button.is-enabled,
  .kanban-plugin__lane button.kanban-plugin__lane-settings-button:hover {
    background: transparent;
    color: var(--text-normal);
    transition: color 0.1s ease-in-out;
  }

  .kanban-plugin__new-lane-button-wrapper {
    bottom: 30px;
    position: fixed;
  }

  .kanban-plugin__lane-items > .kanban-plugin__placeholder:only-child {
    border: 1px dashed var(--background-modifier-border);
    height: 2em;
  }

  .kanban-plugin__item-postfix-button-wrapper {
    align-self: flex-start;
  }

  .kanban-plugin__item button.kanban-plugin__item-prefix-button.is-enabled,
  .kanban-plugin__item button.kanban-plugin__item-postfix-button.is-enabled,
  .kanban-plugin__lane button.kanban-plugin__lane-settings-button.is-enabled {
    color: var(--text-muted);
  }

  .kanban-plugin button {
    box-shadow: none;
    cursor: var(--cursor);
    height: auto;
  }

  .kanban-plugin__item button.kanban-plugin__item-prefix-button:hover,
  .kanban-plugin__item button.kanban-plugin__item-postfix-button:hover,
  .kanban-plugin__lane button.kanban-plugin__lane-settings-button:hover {
    background-color: var(--background-modifier-hover);
  }

  .kanban-plugin__item-button-wrapper > button {
    background: transparent;
    color: var(--text-muted);
    font-weight: 400;
    min-height: calc(var(--input-height) + 8px);
  }

  .kanban-plugin__item-button-wrapper > button:hover {
    background: var(--background-modifier-hover);
    color: var(--text-normal);
  }

  .kanban-plugin__item-button-wrapper > button:focus {
    box-shadow: none;
  }

  .kanban-plugin__item-button-wrapper {
    border-top: none;
    padding: 1px 6px 5px;
  }

  .kanban-plugin__lane-setting-wrapper > div:last-child {
    border: none;
    margin: 0;
  }

  .kanban-plugin.something-is-dragging {
    cursor: grabbing;
    cursor: grabbing;
  }

  .kanban-plugin__item.is-dragging {
    box-shadow:
      0 5px 30px rgb(0 0 0 / 15%),
      0 0 0 2px var(--text-selection);
  }

  .kanban-plugin__lane-items {
    background-color: var(--background-secondary);
    border: var(--kanban-border) solid var(--background-modifier-border);
    margin: 0;
    padding: 0 4px;
  }

  .kanban-plugin__lane {
    background: transparent;
    border: var(--border-width) solid transparent;
    padding: 0;

    &.is-dragging {
      border: 1px solid var(--background-modifier-border);
      box-shadow: 0 5px 30px rgb(0 0 0 / 15%);
    }

    .kanban-plugin__item-button-wrapper {
      border-bottom-width: 0;
      border-top: 1px solid var(--background-modifier-border);
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
      padding: 4px 4px 0;
    }

    &.will-prepend {
      .kanban-plugin__lane-items {
        border-radius: 8px;
      }

      .kanban-plugin__item-form {
        border-bottom-width: 0;
        border-radius: 8px 8px 0 0;
        border-top: 1px solid var(--background-modifier-border);
        padding: 4px 4px 0;

        + .kanban-plugin__lane-items {
          border-radius: 0 0 8px 8px;
          border-top-width: 0;
        }
      }

      .kanban-plugin__item-button-wrapper {
        + .kanban-plugin__lane-items {
          border-radius: 0 0 8px 8px;
          border-top-width: 0;
        }
      }
    }

    &:not(.will-prepend) {
      .kanban-plugin__item-form,
      .kanban-plugin__item-button-wrapper {
        border-radius: 0 0 8px 8px;
        border-top: none;
      }

      .kanban-plugin__item-button-wrapper {
        border-bottom-width: 1px;
        padding: 0 4px 4px;
      }

      .kanban-plugin__lane-items {
        border-bottom: none;
        border-radius: 8px 8px 0 0;
        border-top-width: 1px;
      }
    }
  }

  .kanban-plugin__item-form .kanban-plugin__item-input-wrapper {
    display: flex;
    justify-content: center;
    min-height: calc(var(--input-height) + 8px);
  }

  .kanban-plugin__item-form,
  .kanban-plugin__item-button-wrapper {
    background-color: var(--background-secondary);
    border: var(--kanban-border) solid var(--background-modifier-border);
  }

  .kanban-plugin__item-form {
    padding: 0 4px 5px;
  }

  .kanban-plugin__markdown-preview-view {
    ol.contains-task-list .contains-task-list,
    ul.contains-task-list .contains-task-list,
    ul,
    ol {
      padding-inline-start: 1.8em !important;
    }
  }
}

@media (width <=400pt) {
  .kanban-plugin__board {
    flex-direction: column !important;
  }

  .kanban-plugin__lane {
    margin-bottom: 1rem !important;
    width: 100% !important;
  }
}
